<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Introduction to dplyr | An illustrated introduction to R</title>
  <meta name="description" content="4 Introduction to dplyr | An illustrated introduction to R for absolute beginners." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Introduction to dplyr | An illustrated introduction to R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="4 Introduction to dplyr | An illustrated introduction to R for absolute beginners." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Introduction to dplyr | An illustrated introduction to R" />
  
  <meta name="twitter:description" content="4 Introduction to dplyr | An illustrated introduction to R for absolute beginners." />
  

<meta name="author" content="Hari Subhash" />


<meta name="date" content="2021-08-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basics.html"/>
<link rel="next" href="appendix.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">An illustrated introduction to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#pre-requisites"><i class="fa fa-check"></i><b>1.1</b> Pre-requisites</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>2</b> Get setup</a>
<ul>
<li class="chapter" data-level="2.1" data-path="setup.html"><a href="setup.html#install-r"><i class="fa fa-check"></i><b>2.1</b> Install R</a></li>
<li class="chapter" data-level="2.2" data-path="setup.html"><a href="setup.html#drive-a-ferarri"><i class="fa fa-check"></i><b>2.2</b> Drive a Ferarri</a></li>
<li class="chapter" data-level="2.3" data-path="setup.html"><a href="setup.html#console"><i class="fa fa-check"></i><b>2.3</b> Meet the console - a glorified calculator</a></li>
<li class="chapter" data-level="2.4" data-path="setup.html"><a href="setup.html#dealing-with-errors"><i class="fa fa-check"></i><b>2.4</b> Dealing with errors</a></li>
<li class="chapter" data-level="2.5" data-path="setup.html"><a href="setup.html#saving-code"><i class="fa fa-check"></i><b>2.5</b> Saving code</a></li>
<li class="chapter" data-level="2.6" data-path="setup.html"><a href="setup.html#executing-a-script"><i class="fa fa-check"></i><b>2.6</b> Executing a script</a></li>
<li class="chapter" data-level="2.7" data-path="setup.html"><a href="setup.html#rstudio-look-and-feel"><i class="fa fa-check"></i><b>2.7</b> RStudio look and feel</a></li>
<li class="chapter" data-level="2.8" data-path="setup.html"><a href="setup.html#the-magical-world-of-notebooks"><i class="fa fa-check"></i><b>2.8</b> The magical world of notebooks</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="setup.html"><a href="setup.html#anatomy-of-an-r-markdown-document"><i class="fa fa-check"></i><b>2.8.1</b> Anatomy of an R markdown document</a></li>
<li class="chapter" data-level="2.8.2" data-path="setup.html"><a href="setup.html#save-and-preview-a-notebook"><i class="fa fa-check"></i><b>2.8.2</b> Save and preview a notebook</a></li>
<li class="chapter" data-level="2.8.3" data-path="setup.html"><a href="setup.html#creating-and-running-code-chunks"><i class="fa fa-check"></i><b>2.8.3</b> Creating and running Code chunks</a></li>
<li class="chapter" data-level="2.8.4" data-path="setup.html"><a href="setup.html#exercise"><i class="fa fa-check"></i><b>2.8.4</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="setup.html"><a href="setup.html#workflow"><i class="fa fa-check"></i><b>2.9</b> How to use this book</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>3</b> R basics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="basics.html"><a href="basics.html#variables"><i class="fa fa-check"></i><b>3.1</b> Variables</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="basics.html"><a href="basics.html#exercise-1"><i class="fa fa-check"></i><b>3.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="basics.html"><a href="basics.html#data-types"><i class="fa fa-check"></i><b>3.2</b> Data types</a></li>
<li class="chapter" data-level="3.3" data-path="basics.html"><a href="basics.html#functions"><i class="fa fa-check"></i><b>3.3</b> Functions</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="basics.html"><a href="basics.html#exercises"><i class="fa fa-check"></i><b>3.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="basics.html"><a href="basics.html#packages"><i class="fa fa-check"></i><b>3.4</b> Packages</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="basics.html"><a href="basics.html#install-the-tidyverse-package"><i class="fa fa-check"></i><b>3.4.1</b> Install the tidyverse package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="introduction-to-dplyr.html"><a href="introduction-to-dplyr.html"><i class="fa fa-check"></i><b>4</b> Introduction to dplyr</a>
<ul>
<li class="chapter" data-level="4.1" data-path="introduction-to-dplyr.html"><a href="introduction-to-dplyr.html#composing-complex-workflows-using-pipes"><i class="fa fa-check"></i><b>4.1</b> Composing complex workflows using pipes</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="introduction-to-dplyr.html"><a href="introduction-to-dplyr.html#the-anatomy-of-a-tidyverse-function"><i class="fa fa-check"></i><b>4.1.1</b> The anatomy of a tidyverse function</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="introduction-to-dplyr.html"><a href="introduction-to-dplyr.html#select"><i class="fa fa-check"></i><b>4.2</b> Select</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="introduction-to-dplyr.html"><a href="introduction-to-dplyr.html#exercises-1"><i class="fa fa-check"></i><b>4.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="introduction-to-dplyr.html"><a href="introduction-to-dplyr.html#filter"><i class="fa fa-check"></i><b>4.3</b> Filter</a></li>
<li class="chapter" data-level="4.4" data-path="introduction-to-dplyr.html"><a href="introduction-to-dplyr.html#mutate"><i class="fa fa-check"></i><b>4.4</b> Mutate</a></li>
<li class="chapter" data-level="4.5" data-path="introduction-to-dplyr.html"><a href="introduction-to-dplyr.html#arrange"><i class="fa fa-check"></i><b>4.5</b> Arrange</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>5</b> Appendix</a>
<ul>
<li class="chapter" data-level="5.1" data-path="appendix.html"><a href="appendix.html#packages-1"><i class="fa fa-check"></i><b>5.1</b> Packages</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="appendix.html"><a href="appendix.html#what-is-a-package"><i class="fa fa-check"></i><b>5.1.1</b> What is a package?</a></li>
<li class="chapter" data-level="5.1.2" data-path="appendix.html"><a href="appendix.html#why-are-packages-useful"><i class="fa fa-check"></i><b>5.1.2</b> Why are packages useful?</a></li>
<li class="chapter" data-level="5.1.3" data-path="appendix.html"><a href="appendix.html#package-repositories"><i class="fa fa-check"></i><b>5.1.3</b> Package Repositories</a></li>
<li class="chapter" data-level="5.1.4" data-path="appendix.html"><a href="appendix.html#package-documentation"><i class="fa fa-check"></i><b>5.1.4</b> Package documentation</a></li>
<li class="chapter" data-level="5.1.5" data-path="appendix.html"><a href="appendix.html#install-cowsay-package"><i class="fa fa-check"></i><b>5.1.5</b> Install cowsay package</a></li>
<li class="chapter" data-level="5.1.6" data-path="appendix.html"><a href="appendix.html#remove-a-package"><i class="fa fa-check"></i><b>5.1.6</b> Remove a package</a></li>
<li class="chapter" data-level="5.1.7" data-path="appendix.html"><a href="appendix.html#install-a-package-from-github"><i class="fa fa-check"></i><b>5.1.7</b> Install a package from GitHub</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An illustrated introduction to R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="introduction-to-dplyr" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Introduction to dplyr</h1>
<p>dplyr is a package that belongs to the tidyverse that is used for manipulating data. Let’s start by loading the tidyverse package into our environment.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="introduction-to-dplyr.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div id="composing-complex-workflows-using-pipes" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Composing complex workflows using pipes</h2>
<p>The ability to compose a complex task by piecing together much simpler functions is an important principle of the tidyverse. The pipe operator <code>%&gt;%</code> is what connects all the simpler pieces.</p>
<p>In a piped composition, you can think of each function doing some sort of operation on the data, the pipe than passes this transformed data to the next function. The illustration below shows a typical piped workflow. I have used shapes and colors as a way of representing data. Notice how the data is transformed in some manner in each step and then passed on to the next function in the composition. Each function on its own is doing something pretty simple but together then can be composed to perform really complex tasks.</p>
<p><img src="assets/dplyr/dplyr_intro.gif" /><!-- -->
A compositional approach to programming has several benefits. It is easier to write code in such a manner. Our brains work by breaking down complex tasks into smaller more manageable chunks. Code with simple and well named functions that are glued together using pipes is also easier to read and reason about thereby making it easier to collaborate and debug for errors.</p>
<p>The pipe is a fundamental piece of the tidyverse. It is the glue that holds it together. Now let’s look a bit more closely at the anatomy of a tidyverse function.</p>
<div id="the-anatomy-of-a-tidyverse-function" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> The anatomy of a tidyverse function</h3>
<p>Most functions in the tidyverse follow the same pattern. The first argument in the function is <code>.data</code>. This explicitly specifies the data on which a function is being applied. The second set of arguments specify what to do with the data. For instance, the <code>select()</code> function selects columns from a table, in the illustration below it is used to select the mpg and hp columns from the cars table. Note that I haven’t specified the name of the argument in the select function. But I could have written the same function as follows <code>select(.data = cars, mpg, hp)</code> and this would do the exact same thing.</p>
<p>The output from the select function in the illustration is piped to a filter command. The key thing to note here is the use of a <code>.</code> to specify the data. <code>.</code> simply denotes the output from the previous function in the pipe. In the case of the illustration below it indicates that the filter function should use the output from the select function before it as its data input. Again, as before, I could have written this function as <code>filter(.data = ., hp &gt; 15)</code>.</p>
<p><img src="assets/dplyr/fn_anatomy_1.gif" /><!-- -->
Repeatedly specifying <code>.</code> can become tedious, particularly with longer piped compositions. To avoid this the tidyverse functions allow you to optionally leave out the <code>.data</code> argument from a function. Doing this will assume that the input for the function to be the output from the previous function. So the previous illustration could be re-written as shown below.</p>
<p><img src="assets/dplyr/fn_anatomy_12.gif" /><!-- --></p>
<p>Now let’s look at some of the commonly used dplyr functions. We will be using the <code>starwars</code> table to explore all the functions. This data is included with the tidyverse package and is loaded when you load the library. Go ahead and type in <code>starwars</code> in your console and press enter to see it displayed.</p>
<p><img src="assets/dplyr/starwars_table.png" width="849" /></p>
</div>
</div>
<div id="select" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Select</h2>
<p>The select command selects variables from a table. Let’s try this on the star wars table. Create a new chunk in your notebook and paste the command shown below. You could also just paste into your console to see the output there.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="introduction-to-dplyr.html#cb2-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="introduction-to-dplyr.html#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, height, mass)</span></code></pre></div>
<p>See how the output table now only includes the three columns that we specified.</p>
<p><img src="assets/dplyr/select_1.gif" /><!-- --></p>
<p>The select function offers a few different ways to select columns. For instance, we could also use the position of columns in a table to select them.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="introduction-to-dplyr.html#cb3-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="introduction-to-dplyr.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 87 × 3
##    name               height  mass
##    &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt;
##  1 Luke Skywalker        172    77
##  2 C-3PO                 167    75
##  3 R2-D2                  96    32
##  4 Darth Vader           202   136
##  5 Leia Organa           150    49
##  6 Owen Lars             178   120
##  7 Beru Whitesun lars    165    75
##  8 R5-D4                  97    32
##  9 Biggs Darklighter     183    84
## 10 Obi-Wan Kenobi        182    77
## # … with 77 more rows</code></pre>
<p>We can also select a range of variables from a table using <code>:</code> symbol. Try the code below.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="introduction-to-dplyr.html#cb5-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="introduction-to-dplyr.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name<span class="sc">:</span>mass)</span></code></pre></div>
<div id="exercises-1" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>Select the 1st to the 6th column using <code>:</code> operator and column numbers (start column is 1 and ending column is 6).</li>
<li>Read the documentation <a href="https://dplyr.tidyverse.org/reference/select.html">here</a> to figure out how to select all the columns with names that contain “color.”</li>
</ol>
</div>
</div>
<div id="filter" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Filter</h2>
</div>
<div id="mutate" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Mutate</h2>
</div>
<div id="arrange" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Arrange</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
