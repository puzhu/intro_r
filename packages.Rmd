# Packages
One of the biggest benefits of using an open source language like R is its robust package ecosystem. Now, if the only packages that you know of are the ones that get delivered by your mail person, then stick around. This chapter will cover how to install, use, uninstall and find packages. Letâ€™s start by understanding what packages are and why they are so great.

## What is a package?
A package usually contains code, data and documentation.

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/package_open.gif")
```

The code part usually contains a set of functions that we can use in our work. In Chapter \@ref(functions-intro), we discussed how functions allow us to encapsulate a series of operations. This function can then be repeatedly called to execute the same sequence of steps. Packages contain often contain a collection of such functions that have been written and tested by someone else.

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/package_fn.gif")
```

## Why are packages useful?
Packages, can save us a tremendous amount of time and effort when conducting data analysis. Let's see how.

Imagine you are researching software stocks to invest in. You specifically want to examine past trends in price movement to predict the future.

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/stock_qstn.gif")
```

To do this research, you will first need to download historical price data for different stocks from a website or service like Yahoo Finance or Morningstar.

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/extract.gif")
```

Often, the downloaded data has errors, might be incomplete, and in a shape that is not suited for the analysis that you want to perform. So the first task is usually to tidy this data so that it is in a format that you can use. For instance, in the case shown below I transform the data from a wide format with stock names as columns to a long format where the stocks are represented as rows. There is a lot more to tidying data, which we will cover in chapter \@ref(tidy_data).

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/tidy.gif")
```

The next series of steps usually combine, data visualizations, analysis, and data transformations that are performed in an iterative manner till we arrive at some meaningful conclusions from the data.

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/make_sense.gif")
```

Once we have some conclusions that we can share, we can communicate these results. In a collaborative setting you would also need to communicate intermediate results with your research partner(s). So in these settings, communication can also be wrapped into the earlier iterative process of making sense of the data. 

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/communicate.gif")
```

Packages help simplify all of these steps. Most tasks and problems that you encounter in your analysis are likely to have already been resolved in a different setting by someone else. For instance, consider the task of getting data from Yahoo Finance, someone else has probably done this using R before. Packages are a way to bundle these solutions along with some documentation so that you don't have to reinvent the wheel when solving the same problems again.

For example, in our case, the [tidyquant](https://business-science.github.io/tidyquant/) package contains a lot of functions for financial analysis. These can be used to directly download data from Yahoo Finance (or other sources), run popular financial models and visualize them. Similarly, other packages such as tidyr, ggplot, dplyr etc. provide general purpose tools and frameworks that can be applied to any data analysis project. And finally, packages like Rmarkdown and knitr make it really easy to communicate your results in a compelling manner in a wide variety of formats. 

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/package_use.gif")
```

In a world without packages, you would need to write all the code needed to perform every step of your analysis. This would mean, code to download the stock data, clean it up, custom code to create financial models that you want to use, code for the analysis itself, and generating the charts and tables to include in a report or presentation to communicate the results.

The bulk of your intellectual work should be on analyzing whether a stock is a good investment or not i.e. making sense of the data. And packages free up your time by giving you well tested and effective solutions for tasks that are tangential to this purpose so that you can spend all your time on tasks that matter. 

## Installing packages
Before we install a package, let's understand how they are maintained. When someone writes a package, they would need to host somewhere on the internet so that others can access the package to install it. The place that a package is hosted is called a repository. So when we issue a command on our computer to install a particular package, the relevant package is retrieved from this repository and installed on our computer.

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/repo_concept.gif")
```


There are three main sources for r packages. The first and biggest one is the Comprehensive R Archive Network or CRAN. There are about 17500 packages on CRAN right now. The next one is called Bioconductor which specifically provides tools and packages for genomic data and analysis. The final category of packages are hosted independently with the most common choice being github which is a repository for code. 

Packages that are hosted on CRAN or on BioConductor have requirements about testing and maintenance that ensures the quality of the code. These requirements do not exist for packages that are hosted independently on platforms like Github.

CRAN and Bioconductor require package developers to maintain their packages and pass certain quality checks. Packages that are not maintained are periodically removed from these repositories. Independently hosted packages such as those on Github on the other hand do not have to pass any sort of checks. Package developers often use github to release the most latest versions of their packages on Github before moving them to repositories like CRAN.

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/3_repos.gif")
```

Most of the packages that we will use are hosted on CRAN (unless your work is on Genomics). It is also often the case that packages that are hosted on CRAN are also available on GitHub. These usually tend to be the most recent version of a particular package that has not fully tested but might include newer functions that are not in the previous version that is on CRAN. 

```{r echo=FALSE}
knitr::include_graphics("assets/packages/gifs/repo_last.gif")
```

